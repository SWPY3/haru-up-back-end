spring:
  application:
    name: haruUp

  profiles:
    active: ${APPS_ENV}  # dev = Swagger 활성화 | prod = Swagger 비활성화

  config:
    import: classpath:env.properties

  datasource:
    # PostgreSQL (Local Docker) - p6spy 비활성화 (hypersistence-utils 호환성 문제)
    driver-class-name: org.postgresql.Driver
    url: jdbc:postgresql://${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}
    username: ${POSTGRES_USER}
    password: ${POSTGRES_PASSWORD}

    # MySQL (External - uncomment to use)
    #driver-class-name: com.mysql.cj.jdbc.Driver
    #url: jdbc:mysql://${MY_SQL_END_POINT}:3306/${MY_SQL_DB_NAME}?serverTimezone=Asia/Seoul
    #username: ${MY_SQL_DB_USERNAME}
    #password: ${MY_SQL_DB_PASSWORD}

  jpa:
    show-sql: true  # SQL 로깅 활성화 (p6spy 대신)
    database-platform: org.hibernate.dialect.PostgreSQLDialect  # 또는 이 줄도 빼도 됨(드라이버로 자동 추론)
    properties:
      hibernate:
        format_sql: true  # SQL 포맷팅
        use_sql_comments: false
        default_batch_fetch_size: 1000
        jdbc.time_zone: Asia/Seoul
        hbm2ddl.halt_on_error: false
    hibernate:
      ddl-auto: update
    open-in-view: true
  data:
    redis:
      host: ${REDIS_HOST:localhost}
      port: ${REDIS_PORT:6379}
      password: ${REDIS_PASSWORD}

  batch:
    jdbc:
      initialize-schema: never  # 최초 1회 후 never로 변경 권장

logging:
  level:
    org.hibernate.SQL: DEBUG  # SQL 로깅
    org.hibernate.type.descriptor.sql: TRACE  # 바인딩 파라미터 로깅 (필요시 활성화)

jwt:
  secret-key: ${JWT_SECRET_KEY}
  #expiration: ${JWT_EXPIRATION}
  issuer: ${JWT_ISSUER}
  access-token-validity-in-seconds: 8640000 # 1 day
  refresh-token-validity-in-seconds: 60480000 # 7 days

clova:
  api:
    url: https://clovastudio.stream.ntruss.com
    key: ${CLOVA_API_KEY}
    model: HCX-DASH-002              # AI 추천 모델
    embedding-model: clir-emb-dolphin # 임베딩 모델 (1024차원)

server:
  port: 8080
  compression:
    enabled: true
    mime-types: application/json
# Swagger UI 설정
springdoc:
  swagger-ui:
    persist-authorization: true  # 새로고침해도 토큰 유지


management:
  endpoints:
    web:
      exposure:
        include: "health,info,prometheus"  # 혹은 "*"
  endpoint:
    health:
      show-details: "always"
  metrics:
    tags:
      application: my-spring-app   # 공통 태그


file:
  upload-dir: ./uploads
