spring:
  application:
    name: haruUp

  profiles:
    active: ${APPS_ENV}  # dev = Swagger 활성화 | prod = Swagger 비활성화

  config:
    import: classpath:env.properties

  datasource:
    # PostgreSQL (Local Docker)
    driver-class-name: org.postgresql.Driver
    url: jdbc:postgresql://${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}
    username: ${POSTGRES_USER}
    password: ${POSTGRES_PASSWORD}

    # MySQL (External - uncomment to use)
    #driver-class-name: com.mysql.cj.jdbc.Driver
    #url: jdbc:mysql://${MY_SQL_END_POINT}:3306/${MY_SQL_DB_NAME}?serverTimezone=Asia/Seoul
    #username: ${MY_SQL_DB_USERNAME}
    #password: ${MY_SQL_DB_PASSWORD}

  jpa:
    show-sql: true
    database-platform: org.hibernate.dialect.PostgreSQLDialect  # 또는 이 줄도 빼도 됨(드라이버로 자동 추론)
    properties:
      hibernate:
        format_sql: true
        use_sql_comments: false
        default_batch_fetch_size: 1000
        jdbc.time_zone: Asia/Seoul
        hbm2ddl.halt_on_error: false
    hibernate:
      ddl-auto: none
    open-in-view: true

  data:
    redis:
      host: ${REDIS_HOST:localhost}
      port: ${REDIS_PORT:6379}
      password: ${REDIS_PASSWORD}


logging:
  level:
    p6spy: info

jwt:
  secret-key: ${JWT_SECRET_KEY}
  #expiration: ${JWT_EXPIRATION}
  issuer: ${JWT_ISSUER}
  access-token-validity-in-seconds: 8640000 # 1 day
  refresh-token-validity-in-seconds: 60480000 # 7 days

clova:
  api:
    url: https://clovastudio.stream.ntruss.com
    key: ${CLOVA_API_KEY}
    model: HCX-DASH-002              # AI 추천 모델
    embedding-model: clir-emb-dolphin # 임베딩 모델 (1024차원)

# 관심사 임베딩 설정
interest:
  embedding:
    min-usage-count: 3        # 최소 사용 횟수
    delay-days: 7             # 검증 기간 (일)
    batch-size: 100           # 배치 크기
    batch-cron: "0 0 3 * * *" # 배치 실행 시간 (매일 새벽 3시)
    vector-size: 1024         # Clova Embedding 벡터 차원

server:
  port: 8080


management:
  endpoints:
    web:
      exposure:
        include: "health,info,prometheus"  # 혹은 "*"
  endpoint:
    health:
      show-details: "always"
  metrics:
    tags:
      application: my-spring-app   # 공통 태그


file:
  upload-dir: ./uploads
